var test = (import "utils").test;
var throws = (import "utils").throws;

# TODO: should options have == ?

test "basic stuff" {
    var option = (new Option "hi");
    assert ((option.get_value) == "hi");
    assert (not option.is_none);
    assert ((option.to_debug_string) == "<Option: \"hi\">");
};

test "none" {
    assert (none `is_instance_of` Option);
    assert none.is_none;
    assert ((none.to_debug_string) == "none");
    throws ValueError {
        var _ = (none.get_value);
    };
};

test "immutable" {
    var option = (new Option "hi");
    assert ((option.get_value) == "hi");
    assert (not option.is_none);

    throws AttribError {
        option.is_none = true;
    };
    assert ((option.get_value) == "hi");
    assert (not option.is_none);
};
